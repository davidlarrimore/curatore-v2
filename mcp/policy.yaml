# MCP Gateway Policy Configuration v2.0
#
# Auto-derive mode: Functions with exposure_profile.agent=true in their
# backend contract are automatically exposed. No allowlist needed.
#
# Use denylist to block specific functions regardless of exposure_profile.

version: "2.0"

# Denylist — functions blocked regardless of exposure_profile
# (By default, all functions with exposure_profile.agent=true are exposed)
denylist: []

# Parameter clamps — limit values that users can request
# These override user input to enforce resource limits
clamps:
  # Search functions — limit result count
  search_assets:
    limit:
      max: 50
      default: 20
  search_notices:
    limit:
      max: 50
      default: 20
  search_solicitations:
    limit:
      max: 50
      default: 20
  search_forecasts:
    limit:
      max: 50
      default: 20
  search_scraped_assets:
    limit:
      max: 50
      default: 20
  search_salesforce:
    limit:
      max: 50
      default: 20

  # SharePoint browsing — limit result count
  sp_list_items:
    limit:
      max: 200
      default: 50

  # Content functions — limit text size
  get_content:
    max_total_chars:
      max: 80000
      default: 50000

  # Document generation — always save to storage for MCP agents
  generate_document:
    save_to_storage:
      default: true

  # LLM functions — limit token usage
  llm_summarize:
    max_tokens:
      max: 2000
      default: 1000
  llm_extract:
    max_tokens:
      max: 2000
      default: 1000
  llm_generate:
    max_tokens:
      max: 2000
      default: 1000
  llm_classify:
    max_tokens:
      max: 2000
      default: 1000

# Global settings
settings:
  # Block all functions with side_effects=true (overrides auto-derive)
  block_side_effects: true
  # Exceptions: allow these side-effect functions
  # These are "safe" because they require a confirmation token from a prepare step
  side_effects_allowlist:
    - confirm_email
    - generate_document
  # Validate facet_filters against metadata catalog
  validate_facets: true
  # Cache TTL for contracts (seconds)
  contract_cache_ttl: 300
  # Cache TTL for metadata catalog (seconds)
  metadata_cache_ttl: 600
